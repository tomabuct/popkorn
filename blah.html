<html>
<head>
<!-- Import JavaScript Libraries. -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="swfobject.js"></script>
<script type="text/javascript" src="web_socket.js"></script>

<script type="text/javascript" src="swfobject.js"></script>    
 <div id="ytapiplayer">
   You need Flash player 8+ and JavaScript enabled to view this video.
 </div>
<script type="text/javascript">

  function onYouTubePlayerReady(playerId) {
    ytplayer = document.getElementById("myytplayer");
    ytplayer.addEventListener("onStateChange", "onytplayerStateChange");
  }

  var params = { allowScriptAccess: "always" };
  var atts = { id: "myytplayer" };
  swfobject.embedSWF("http://www.youtube.com/v/ZPPdetZTOx0?enablejsapi=1&playerapiid=ytplayer&version=3",
                     "ytapiplayer", "425", "356", "8", null, null, params, atts);


  // Let the library know where WebSocketMain.swf is:
  WEB_SOCKET_SWF_LOCATION = "WebSocketMain.swf";

  // Write your code in the same way as for native WebSocket:
  ws = new WebSocket("ws://localhost:8080/");
  ws.onopen = function() {
  };
  ws.onmessage = function(e) {
    // Receives a message.
    if (e.data == "play") {
      ytplayer.playVideo();
    } else {
      $("#thing").css("color", "");
    }
  };
  ws.onclose = function() {
    alert("closed");
  };

</script>
</head>
<body>
<script type="text/javascript">
$(function() {
  $("#thing").mousedown(function() {
    ws.send("play");
  })

  $("#thing").mouseup(function() {
    ws.send("up");
  })
});
</script>
<p id="thing">hi</p>
</body>
</html>
